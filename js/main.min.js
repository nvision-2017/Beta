jQuery(document).ready(function(e){function f(e){e.length>0&&setTimeout(function(){e.addClass("bg-loaded"),f(e.next())},150)}function v(i){var n=i.index();a.children("li").eq(n).add(i).addClass("selected"),o?(s.addClass("slide-out").removeClass("selected"),a.children("li").eq(n).addClass("content-visible"),d=!1):h(s,n,0,!0),e(".initial-div,#social").hide()}function u(){a.find(".selected").removeClass("selected").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){e(this).removeClass("content-visible").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),h(n.children("li"),-1,0,!1)}),o&&(s.removeClass("slide-out"),a.find(".content-visible").removeClass("content-visible"),d=!1),e(".initial-div,#social").show()}function h(e,i,n,s){0==n&&b(),-1!=i&&0==n&&(n=1);var t=C();t==i&&(t=C()),r-1>n?(e.eq(t).toggleClass("slide-out",s),setTimeout(function(){h(e,i,n+1,s)},150)):n==r-1&&e.eq(t).toggleClass("slide-out",s).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){-1!=i?(a.children("li.selected").addClass("content-visible"),e.eq(i).addClass("slide-out").removeClass("selected")):l.hasClass("nav-visible")&&s&&l.addClass("nav-clickable"),e.eq(t).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),d=!1})}function C(){var e=Math.floor(Math.random()*c.length),i=c[e];return c.splice(e,1),i}function b(){c.length=0;for(var e=0;r>e;e++)c.push(e)}var i=e(".cd-projects-container"),n=i.find(".cd-projects-previews"),s=n.children("li"),a=i.find(".cd-projects"),t=e(".cd-nav-trigger"),l=e(".cd-primary-nav"),o=e(".no-csstransitions").length>0;t.addClass("nav-visible");var d=!1,r=a.find("li").length,c=[];n.on("click","a",function(n){n.preventDefault(),0==d&&(d=!0,t.add(i).removeClass("nav-visible").addClass("project-open"),v(e(this).parent("li")))}),t.on("click",function(e){e.preventDefault(),0==d&&(d=!0,t.hasClass("project-open")?(t.add(i).removeClass("project-open").addClass("nav-visible"),u()):t.hasClass("nav-visible")?(t.removeClass("nav-visible"),l.addClass("nav-visible"),o?s.addClass("slide-out"):h(n.children("li"),-1,0,!0)):(t.addClass("nav-visible"),l.removeClass("nav-clickable nav-visible"),o?s.removeClass("slide-out"):h(n.children("li"),-1,0,!1))),o&&(d=!1)}),i.on("click",".scroll",function(){i.animate({scrollTop:e(window).height()},500)}),s.children("a").bgLoaded({afterLoaded:function(){f(s.eq(0))}}),t.click(),setTimeout(function(){t.click()},3e3)}),function(e){e.fn.bgLoaded=function(i){var n=this,s={afterLoaded:function(){this.addClass("bg-loaded")}},a=e.extend({},s,i);n.each(function(){var i=e(this),n=i.css("background-image").split(", ");i.data("loaded-count",0),e.each(n,function(s,t){var l=t.replace(/^url\(["']?/,"").replace(/["']?\)$/,"");e("<img/>").attr("src",l).load(function(){e(this).remove(),i.data("loaded-count",i.data("loaded-count")+1),i.data("loaded-count")>=n.length&&a.afterLoaded.call(i)})})})}}(jQuery);